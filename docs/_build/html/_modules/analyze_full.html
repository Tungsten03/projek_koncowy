
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>analyze_full &#8212; KRAQEN 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for analyze_full</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">utility</span> <span class="kn">import</span> <span class="n">labels</span> <span class="k">as</span> <span class="n">lbl</span>
<span class="kn">from</span> <span class="nn">utility</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">database</span> <span class="kn">import</span> <span class="n">start_database</span> <span class="k">as</span> <span class="n">sdb</span>
<span class="kn">from</span> <span class="nn">data_filter.data_analysis</span> <span class="kn">import</span> <span class="n">plot_values</span>
<span class="kn">from</span> <span class="nn">data_filter</span> <span class="kn">import</span> <span class="n">localize</span>
<span class="kn">from</span> <span class="nn">data_filter.data_analysis</span> <span class="kn">import</span> <span class="n">lowest_measurement</span><span class="p">,</span> <span class="n">highest_measurement</span><span class="p">,</span> <span class="n">avg_measurement</span>
<span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>


<div class="viewcode-block" id="analyze_full"><a class="viewcode-back" href="../analyze_full.html#analyze_full.analyze_full">[docs]</a><span class="k">def</span> <span class="nf">analyze_full</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">refresh_stations</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Lists stations in the listbox.</span>

<span class="sd">        This function clears the listbox and fills it with station data requested from database.</span>
<span class="sd">        It also updates the state of various buttons to block off analysis functions.</span>

<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Clear listbox</span>
        <span class="n">listbox</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
        <span class="c1"># Block sensor analysis</span>
        <span class="n">calculate</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="n">plot_data</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="n">choose_station</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
        <span class="c1"># Retrieve stations from the database and insert them into the listbox</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sdb</span><span class="o">.</span><span class="n">Station</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">sdb</span><span class="o">.</span><span class="n">Station</span><span class="o">.</span><span class="n">cityName</span><span class="o">.</span><span class="n">asc</span><span class="p">()):</span>
            <span class="n">formatted_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">id</span><span class="si">:</span><span class="s1">&lt;10</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">stationName</span><span class="si">:</span><span class="s1">&lt;20</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">listbox</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">formatted_string</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_entry</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the entry widget with the selected ID from the listbox.</span>

<span class="sd">        This function retrieves the selected item from the listbox and extracts the station ID from it.</span>
<span class="sd">        It then updates the entry widget with the selected ID.</span>

<span class="sd">        :param event: The event object (e.g. listbox selection)</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_item</span> <span class="o">=</span> <span class="n">listbox</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">listbox</span><span class="o">.</span><span class="n">curselection</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">selected_item</span><span class="p">:</span>
            <span class="n">selected_id</span> <span class="o">=</span> <span class="n">selected_item</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">listbox_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
            <span class="n">listbox_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">selected_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">calculate_data</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates and displays data based on the selected sensor ID.</span>

<span class="sd">        This function retrieves the sensor ID from the entry widget, calls measurement functions,</span>
<span class="sd">        and displays the calculated values in corresponding output widgets.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sensor</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">listbox_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="c1"># Calculate relevant values</span>
        <span class="n">min_val_calc</span> <span class="o">=</span> <span class="n">lowest_measurement</span><span class="p">(</span><span class="n">sensor</span><span class="p">)</span>
        <span class="n">max_val_calc</span> <span class="o">=</span> <span class="n">highest_measurement</span><span class="p">(</span><span class="n">sensor</span><span class="p">)</span>
        <span class="n">avg_val_calc</span> <span class="o">=</span> <span class="n">avg_measurement</span><span class="p">(</span><span class="n">sensor</span><span class="p">)</span>
        <span class="c1"># Clear corresponding entry</span>
        <span class="n">min_val</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
        <span class="n">max_val</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
        <span class="n">avg_val</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
        <span class="c1"># Insert data to proper entry</span>
        <span class="n">min_val</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">min_val_calc</span><span class="p">)</span>
        <span class="n">max_val</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">max_val_calc</span><span class="p">)</span>
        <span class="n">avg_val</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">avg_val_calc</span><span class="p">)</span>

    <span class="nd">@utils</span><span class="o">.</span><span class="n">log_exec_time</span>
    <span class="k">def</span> <span class="nf">show_sensors</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the sensors for the selected station.</span>

<span class="sd">        This function retrieves the station ID from the entry widget,</span>
<span class="sd">        queries the database for sensors associated with the station,</span>
<span class="sd">        and populates the listbox with the sensor IDs and parameter codes.</span>

<span class="sd">        It also updates the state of buttons to allow sensor analysis.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Get station ID from entry</span>
            <span class="n">station_entry</span> <span class="o">=</span> <span class="n">listbox_entry</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="c1"># Query database and clear listbox</span>
            <span class="n">query</span> <span class="o">=</span> <span class="n">sdb</span><span class="o">.</span><span class="n">Sensor</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">sdb</span><span class="o">.</span><span class="n">Sensor</span><span class="o">.</span><span class="n">stationId</span> <span class="o">==</span> <span class="n">station_entry</span><span class="p">)</span>
            <span class="n">listbox</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
            <span class="c1"># Populate the listbox</span>
            <span class="k">for</span> <span class="n">sensor</span> <span class="ow">in</span> <span class="n">query</span><span class="p">:</span>
                <span class="n">formatted_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sensor</span><span class="o">.</span><span class="n">id</span><span class="si">:</span><span class="s1">&lt;10</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">sensor</span><span class="o">.</span><span class="n">paramFormula</span><span class="si">:</span><span class="s1">&lt;20</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">listbox</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">formatted_string</span><span class="p">)</span>
            <span class="c1"># Switch the buttons to proper state</span>
            <span class="n">calculate</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
            <span class="n">plot_data</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
            <span class="n">choose_station</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="c1"># Handle the exception</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">make_plot</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays plot  for the selected sensor ID</span>

<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sensor</span> <span class="o">=</span> <span class="n">listbox_entry</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">plot_values</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sensor</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">show_in_range</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays stations within a specified range from a user-defined place.</span>

<span class="sd">        This function retrieves the user-defined place and range from the respective entry widgets.</span>
<span class="sd">        It then calls the &#39;localize.stations_in_range()&#39; function to get a stations within the specified range.</span>
<span class="sd">        The station IDs and names from the dictionary are inserted into the listbox.</span>

<span class="sd">        If a ValueError occurs (e.g., invalid range),.</span>
<span class="sd">        it opens a popup window displaying a warning message with instructions.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Clear listbox and switch off analysis buttons</span>
            <span class="n">listbox</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
            <span class="n">calculate</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">plot_data</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="c1"># Get data from entry</span>
            <span class="n">user_place</span> <span class="o">=</span> <span class="n">station_info</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="n">user_range</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">entry_range</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="c1"># Prepare station dictionary and populate listbox</span>
            <span class="n">station_dict</span> <span class="o">=</span> <span class="n">localize</span><span class="o">.</span><span class="n">stations_in_range</span><span class="p">(</span><span class="n">user_place</span><span class="p">,</span> <span class="n">user_range</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">station_dict</span><span class="p">:</span>
                <span class="n">formatted_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">:</span><span class="s1">&lt;10</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s1">&lt;20</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">listbox</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">formatted_string</span><span class="p">)</span>
            <span class="c1">#</span>
            <span class="n">calculate</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">plot_data</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">choose_station</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
        <span class="c1"># Handle the Value Error and display a warning</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">popup</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Toplevel</span><span class="p">()</span>
            <span class="n">popup</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Uwaga!&#39;</span><span class="p">)</span>

            <span class="n">label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">lbl</span><span class="o">.</span><span class="n">popup_warn</span><span class="p">)</span>
            <span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">padx</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

            <span class="n">button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Zamknij&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">popup</span><span class="o">.</span><span class="n">destroy</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">show_help</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display a help popup window with instructions.</span>

<span class="sd">        This function creates a new &#39;Pomoc&#39; popup window using `Toplevel()`. It adds a label to the</span>
<span class="sd">        popup window with the help text obtained from `lbl.gui_help`.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create a new popup window with &#39;Pomoc&#39; title</span>
        <span class="n">popup</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Toplevel</span><span class="p">()</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Pomoc&#39;</span><span class="p">)</span>

        <span class="c1"># Create a label with help text</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">lbl</span><span class="o">.</span><span class="n">gui_help</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">padx</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

        <span class="c1"># Create a close button</span>
        <span class="n">button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Zamknij&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">popup</span><span class="o">.</span><span class="n">destroy</span><span class="p">)</span>
        <span class="n">button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="c1"># Setup GUI for analysis window</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
    <span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">lbl</span><span class="o">.</span><span class="n">app_name_analyze</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;800x600&#39;</span><span class="p">)</span>

    <span class="c1"># Setup frame for calculation results</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RAISED</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">calculate</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Wylicz dane&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">calculate_data</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">calculate</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>

    <span class="n">minimal</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;minimalny:&#39;</span><span class="p">)</span>
    <span class="n">maximal</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;maksymalny:&#39;</span><span class="p">)</span>
    <span class="n">average</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;średnio:&#39;</span><span class="p">)</span>
    <span class="n">min_val</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
    <span class="n">max_val</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
    <span class="n">avg_val</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

    <span class="c1"># Setup Buttons</span>
    <span class="n">app_help</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;POMOC&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">show_help</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">back</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;WSTECZ&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">all_stat</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Wszystkie stacje&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">refresh_stations</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
    <span class="n">in_range</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;W zasięgu&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">show_in_range</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
    <span class="n">choose_station</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Wybierz stacje&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">show_sensors</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

    <span class="c1"># Setup Entry widgets with placeholders</span>
    <span class="n">station_info</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">EntryWithPlaceholder</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;Opis lokacji&#39;</span><span class="p">)</span>
    <span class="n">entry_range</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">EntryWithPlaceholder</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;Promień [km]&#39;</span><span class="p">)</span>
    <span class="n">plot_data</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Wykres&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">make_plot</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">plot_data</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
    <span class="n">listbox_entry</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">EntryWithPlaceholder</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;Aktywny wybór&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">)</span>

    <span class="c1"># Setup listbox</span>
    <span class="n">listbox</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Listbox</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="s1">&#39;Courier&#39;</span><span class="p">)</span>
    <span class="n">scrollbar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scrollbar</span><span class="p">(</span><span class="n">listbox</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">listbox</span><span class="o">.</span><span class="n">yview</span><span class="p">)</span>
    <span class="n">listbox</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">yscrollcommand</span><span class="o">=</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">set</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
    <span class="n">scrollbar</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
    <span class="n">listbox</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;&lt;ListboxSelect&gt;&gt;&quot;</span><span class="p">,</span> <span class="n">update_entry</span><span class="p">)</span>

    <span class="c1"># GUI widgets arrangement (grid model)</span>
    <span class="n">app_help</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">back</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

    <span class="n">all_stat</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

    <span class="n">in_range</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
    <span class="n">station_info</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;we&#39;</span><span class="p">)</span>

    <span class="n">entry_range</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
    <span class="n">choose_station</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">listbox_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">plot_data</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Results widgets arragement</span>
    <span class="n">results</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">rowspan</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">calculate</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">minimal</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">maximal</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">average</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">min_val</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
    <span class="n">max_val</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
    <span class="n">avg_val</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

    <span class="n">listbox</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nswe&#39;</span><span class="p">)</span>

    <span class="c1"># Fill listbox with stations at start</span>
    <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">sdb</span><span class="o">.</span><span class="n">Station</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">sdb</span><span class="o">.</span><span class="n">Station</span><span class="o">.</span><span class="n">cityName</span><span class="o">.</span><span class="n">asc</span><span class="p">()):</span>
        <span class="n">formatted_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">station</span><span class="o">.</span><span class="n">id</span><span class="si">:</span><span class="s1">&lt;10</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">station</span><span class="o">.</span><span class="n">stationName</span><span class="si">:</span><span class="s1">&lt;20</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">listbox</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">formatted_string</span><span class="p">)</span>

    <span class="c1"># Set column and row weights</span>
    <span class="n">root</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">root</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">KRAQEN</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Kacper Rajewski.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>